<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Ball Search</title>

    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/CSSsubpages/ballsearch.css" />
  </head>
  <body>
    <h1>
      Ball Search
      <a href="/DFSsubpage/home.html">
           <button id="homebutton">Go Back</button>
       </a>
    </h1>
    <button id="DFSbutton">DFS Search</button>
    <div>
      <button id="Restartbutton">New Search</button>
    </div>
    <p id = "directions">
      If you press DFS search than the computer will locate the red ball in the tree, and when the computer finds the ball, it will place a small blue ball overtop the red ball.
    </p>

    <script
      src="https://cdn.glitch.com/7616735a-c9d7-4c9d-9178-8489a3306d8c%2Fp5.js?v=1609031588731"
      defer
    ></script>
    <script>
      let ballloc, maxballloc;
      let branch = 100.0;
      let counter = 0;
      let button, restartbutton;

      function setup() {
        createCanvas((windowWidth/2)-72, 600);
        background(0);
        button = select("#DFSbutton");
        restartbutton = select("#Restartbutton");

        //calculate max ball loc
        let a = log10(10.0 / branch);
        let b = log10(0.75);
        exponent = a / b;
        maxballloc = pow(2, exponent);

        //random ball loc
        ballloc = round(random(0, maxballloc));

        translate(width / 2, height);
        push();
        tree(branch);
        pop();

        counter = 0;
      }

      function draw() {
        translate(width / 2, height);
        button.mousePressed(function() {
          dfs(100.0);
        });
        restartbutton.mousePressed(restart);
      }
      
      function restart() {
        counter = 0;
        background(0);
        
         //calculate max ball loc
        let a = log10(10.0 / branch);
        let b = log10(0.75);
        exponent = a / b;
        maxballloc = pow(2, exponent);

        //random ball loc
        ballloc = round(random(0, maxballloc));

        push();
        tree(branch);
        pop();

        counter = 0;
      }

      function tree(branch) {
        let angle = map(45, 0, height, 0, 360);
        if (branch <= 10) return;

        //random ball
        if (counter == ballloc) {
          fill(255, 0, 0);
          noStroke();
          circle(0, 0, 14);
        }

        //tree
        counter += 1;
        stroke(255);
        line(0, 0, 0, -branch);
        translate(0, -branch);
        push();
        rotate(radians(angle));
        tree(0.75 * branch); //call itself
        pop();
        push();
        rotate(-radians(angle));
        tree(0.75 * branch); //call itself
        pop();
      }

      function log10(x) {
        return log(x) / log(10);
      }

      function dfs(branchh) {
        let angle = map(45, 0, height, 0, 360);
        if (branchh <= 10) {
          return;
        }

        if (counter == ballloc) {
          fill(0, 0, 255);
          circle(0, 0, 10);
        }

        counter += 1;
        translate(0, -branchh);
        push();
        rotate(radians(angle));
        dfs(0.75 * branchh); //call itself
        pop();
        push();
        rotate(-radians(angle));
        dfs(0.75 * branchh); //call itself
        pop();
      }
    </script>
  </body>
</html>
